<!DOCTYPE html>
<html lang="zh-CN">
  <head><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="Algorithm Note"/><meta name="keywords" content="Blog" /><link rel="alternate" href="/atom.xml" title="Blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0" />
<link rel="canonical" href="https://langzi418.github.io/2019/08/21/algorithm/algorithm/"/>

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" /><link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css" /><script type="text/x-mathjax-config">
    MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0" />

<script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true,"latex":true};
</script>

    <title>Algorithm Note - Blog</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">首页
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">归档
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Blog</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            首页
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            归档
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            标签
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/about/">
            关于
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">Algorithm Note
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-08-21
        </span></div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#排序"><span class="toc-text">排序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#快速排序"><span class="toc-text">快速排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#归并排序"><span class="toc-text">归并排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#桶排序"><span class="toc-text">桶排序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#搜索"><span class="toc-text">搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#链表"><span class="toc-text">链表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#链表一类距离算法"><span class="toc-text">链表一类距离算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#快慢指针思想"><span class="toc-text">快慢指针思想</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#回文链表"><span class="toc-text">回文链表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#链表对折"><span class="toc-text">链表对折</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#栈"><span class="toc-text">栈</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串"><span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#树"><span class="toc-text">树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#层次遍历"><span class="toc-text">层次遍历</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#非递归遍历"><span class="toc-text">非递归遍历</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Z子形二叉树"><span class="toc-text">Z子形二叉树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#树的子结构"><span class="toc-text">树的子结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重构二叉树"><span class="toc-text">重构二叉树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#树的轮廓"><span class="toc-text">树的轮廓</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二叉树的宽度"><span class="toc-text">二叉树的宽度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二叉搜索树"><span class="toc-text">二叉搜索树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二叉树的最近公共父节点"><span class="toc-text">二叉树的最近公共父节点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#图"><span class="toc-text">图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#递归回溯"><span class="toc-text">递归回溯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#滑动窗口"><span class="toc-text">滑动窗口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Pass"><span class="toc-text">2-Pass</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#动态规划"><span class="toc-text">动态规划</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Max-1D-Range-Sum"><span class="toc-text">Max 1D Range Sum</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LIS"><span class="toc-text">LIS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-1-Knapsack"><span class="toc-text">0-1 Knapsack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subset-Sum"><span class="toc-text">Subset Sum</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Coin-Change"><span class="toc-text">Coin Change</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#K个非负数加到N"><span class="toc-text">K个非负数加到N</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cutting-Sticks"><span class="toc-text">Cutting Sticks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#String-Processing-With-DP"><span class="toc-text">String Processing With DP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#LCS-最长公共子序列"><span class="toc-text">LCS(最长公共子序列)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Longest-Palindrome-回文"><span class="toc-text">Longest Palindrome(回文)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#最大连续乘积"><span class="toc-text">最大连续乘积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#House-Robber"><span class="toc-text">House Robber</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TSP"><span class="toc-text">TSP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#最大m段子段和"><span class="toc-text">最大m段子段和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#股票问题"><span class="toc-text">股票问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#单词分割"><span class="toc-text">单词分割</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#贪心"><span class="toc-text">贪心</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#技巧"><span class="toc-text">技巧</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数学"><span class="toc-text">数学</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#约瑟夫环"><span class="toc-text">约瑟夫环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组合"><span class="toc-text">组合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#全排列"><span class="toc-text">全排列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数值的整数次方"><span class="toc-text">数值的整数次方</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#素数筛"><span class="toc-text">素数筛</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他"><span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#二叉搜索树（递归）"><span class="toc-text">二叉搜索树（递归）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组实现堆进而实现优先队列"><span class="toc-text">数组实现堆进而实现优先队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LRU"><span class="toc-text">LRU</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#前缀树"><span class="toc-text">前缀树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#阻塞队列"><span class="toc-text">阻塞队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#赛马问题"><span class="toc-text">赛马问题</span></a></li></ol></li></ol>
    </div>
  </div><div class="post-content"><p>一些算法归纳：</p>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start &gt;= end) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> low = start, high = end + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> pivot = a[low];</span><br><span class="line">    <span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line">        <span class="keyword">while</span> (low &lt; high &amp;&amp; a[--high] &gt; pivot) ;</span><br><span class="line">        a[low] = a[high];</span><br><span class="line">        <span class="keyword">while</span> (low &lt; high &amp;&amp; a[++low] &lt; pivot) ;</span><br><span class="line">        a[high] = a[low];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    a[low] = pivot;</span><br><span class="line"></span><br><span class="line">    quickSort(a, start, low - <span class="number">1</span>);</span><br><span class="line">    quickSort(a, low + <span class="number">1</span>, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h3><p>自顶向下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mergeSort(<span class="keyword">int</span>[] a,<span class="keyword">int</span> low,<span class="keyword">int</span> high)&#123;</span><br><span class="line">    <span class="keyword">if</span>(high&lt;=low) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> mid=low+(high-low)/<span class="number">2</span>;</span><br><span class="line">    mergeSort(a,low,mid);</span><br><span class="line">    mergeSort(a,mid+<span class="number">1</span>,high);</span><br><span class="line">    merge(a,low,mid,high);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">merge(<span class="keyword">int</span>[] a,<span class="keyword">int</span> low,<span class="keyword">int</span> mid,<span class="keyword">int</span> high)&#123;</span><br><span class="line">    <span class="comment">//归并排序需要一个辅助数组</span></span><br><span class="line">    System.arraycopy(a,low,aux,low,high-low+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> i=low,j=mid+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=low;k&lt;=high;k++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&gt;mid) a[k]=aux[j++];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(j&gt;high) a[k]=aux[i++];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(aux[j]&lt;aux[i]) a[k]=aux[j++];</span><br><span class="line">        <span class="keyword">else</span> a[k]=aux[i++];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>自底向上</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mergeSort(<span class="keyword">int</span>[] a)&#123;</span><br><span class="line">    <span class="keyword">int</span> N=a.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> sz=<span class="number">2</span>;sz&lt;N;sz=sz+sz)&#123;</span><br><span class="line">        <span class="comment">// 当low=N-sz ，low+sz-1=N-1，只有一个区间</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> low=<span class="number">0</span>; low&lt;N-sz; low+=sz+sz)&#123;</span><br><span class="line">            merge(a,low,low+sz-<span class="number">1</span>,min(low+sz+sz-<span class="number">1</span>,N-<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>链表归并</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ListNode <span class="title">sortList</span><span class="params">(ListNode head)</span></span>&#123;</span><br><span class="line">    ListNode dummy=<span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    dummy.next=head;</span><br><span class="line">    <span class="keyword">int</span> N=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(head!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        head=head.next;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> sz=<span class="number">1</span>; sz&lt;N; sz&lt;&lt;=<span class="number">1</span>)&#123;</span><br><span class="line">        ListNode prev=dummy,cur=dummy.next;</span><br><span class="line">        <span class="keyword">while</span>(cur!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            ListNode left=cur;</span><br><span class="line">            ListNode right=split(left,sz);</span><br><span class="line">            cur=split(right,sz);</span><br><span class="line">            prev=merge(left,right,prev);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ListNode <span class="title">split</span><span class="params">(ListNode head, <span class="keyword">int</span> sz)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(head==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; head.next!=<span class="keyword">null</span> &amp;&amp; i&lt;sz; i++) head=head.next;</span><br><span class="line">    ListNode right=head.next;</span><br><span class="line">    head.next=<span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ListNode <span class="title">merge</span><span class="params">(ListNode left, ListNode right, ListNode prev)</span></span>&#123;</span><br><span class="line">    ListNode cur=pre;</span><br><span class="line">    <span class="keyword">while</span>(left!=<span class="keyword">null</span> &amp;&amp; right!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(left.val &lt; right.val)&#123;</span><br><span class="line">            cur.next =left;</span><br><span class="line">            left=left.next;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cur.next =right;</span><br><span class="line">            right=right.next;</span><br><span class="line">        &#125;</span><br><span class="line">        cur=cur.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(left!=<span class="keyword">null</span>) cur.next=left;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(right!=<span class="keyword">null</span>) cur.next=right;</span><br><span class="line">    <span class="keyword">while</span>(cur.next!=<span class="keyword">null</span>) cur=cur.next;</span><br><span class="line">    <span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h3><p>基本思想：将数组arr分成若干个等大的子区间（桶），分别对每个桶排序，再合并。</p>
<p>一般可以利用 [max(arr)-min(arr)] / arr.length来划分区间。</p>
<p>数据最好均匀分布，使得各个桶的数据均匀。</p>
<p>简版：将每个子区间大小为1，统计每个子区间个数，依次输出即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这里假定数据均匀分布于0.0和1.0之间</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bucketSort</span><span class="params">(<span class="keyword">float</span>[] arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = arr.length;</span><br><span class="line">    List&lt;ArrayList&lt;Float&gt;&gt; buckets = <span class="keyword">new</span> ArrayList&lt;&gt;(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        buckets.add(i, <span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="comment">// (int)n*arr[i] 映射到桶中 </span></span><br><span class="line">        buckets.get((<span class="keyword">int</span>) (n * arr[i])).add(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        Collections.Sort(buckets.get(i));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; buckets.get(i).size(); j++)</span><br><span class="line">            arr[index++] = buckets.get(i).get(j);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//---- 折半查找变种 -----</span></span><br><span class="line"><span class="comment">// 第一个大于等于target</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowerBound</span><span class="params">(<span class="keyword">int</span>[] arr,<span class="keyword">int</span> target)</span></span></span><br><span class="line"><span class="function">    <span class="comment">// 可能位于arr.length处</span></span></span><br><span class="line"><span class="function">    <span class="keyword">int</span> low</span>=<span class="number">0</span>,high=arr.length;</span><br><span class="line">    <span class="keyword">while</span>(low&lt;high)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid=low+((high-low)&gt;&gt;<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// high保证了arr[high]&gt;=mid,</span></span><br><span class="line">        <span class="keyword">if</span>(arr[mid]&lt;target) low=mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> high=mid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> low;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一个大于target</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">upperBound</span><span class="params">(<span class="keyword">int</span>[] arr,<span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> low=<span class="number">0</span>,high=arr.length;</span><br><span class="line">    <span class="keyword">while</span>(low&lt;high)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid=low+((high-low)&gt;&gt;<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// high保证了arr[high]&gt;mid,</span></span><br><span class="line">        <span class="keyword">if</span>(arr[mid]&lt;=target) low=mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> high=mid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> low;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h2><h3 id="链表一类距离算法"><a href="#链表一类距离算法" class="headerlink" title="链表一类距离算法"></a>链表一类距离算法</h3><p>1、求共用节点。</p>
<p>思想 S1 + S3 + S2 = S3 + S2 + S1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">getIntersectionNode</span><span class="params">(ListNode headA, ListNode headB)</span> </span>&#123;</span><br><span class="line">    ListNode pa=headA,pb=headB;</span><br><span class="line">    <span class="keyword">while</span>(pa!=pb)&#123;</span><br><span class="line">        pa=pa.next;</span><br><span class="line">        pb=pb.next;</span><br><span class="line">        <span class="keyword">if</span>(pa==pb) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span>(pa==<span class="keyword">null</span>) pa=headB;</span><br><span class="line">        <span class="keyword">if</span>(pb==<span class="keyword">null</span>) pb=headA;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pa;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、求环开始时的节点。</p>
<h3 id="快慢指针思想"><a href="#快慢指针思想" class="headerlink" title="快慢指针思想"></a>快慢指针思想</h3><p>链表回文</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    ListNode fast=head, slow=head;</span><br><span class="line">    <span class="keyword">while</span>(fast!=<span class="keyword">null</span> &amp;&amp; fast.next!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        fast=fast.next.next;</span><br><span class="line">        slow=slow.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(fast!=<span class="keyword">null</span>) slow=slow.next;</span><br><span class="line">    slow = reverse(slow);</span><br><span class="line">    fast= head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(slow!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(fast.val != slow.val)  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        fast = fast.next;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 链表逆序</span></span><br><span class="line"><span class="function">ListNode <span class="title">reverse</span><span class="params">(ListNode head)</span></span>&#123;</span><br><span class="line">    ListNode pre = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">while</span>(head!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        ListNode next= head.next;</span><br><span class="line">        head.next = pre;</span><br><span class="line">        pre = head;</span><br><span class="line">        head = next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pre;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="回文链表"><a href="#回文链表" class="headerlink" title="回文链表"></a>回文链表</h3><h3 id="链表对折"><a href="#链表对折" class="headerlink" title="链表对折"></a>链表对折</h3><h2 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h2><p>LeetCode  155 最小栈</p>
<p>用一个栈实现最小栈。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=min)&#123;</span><br><span class="line">        stack.push(min);</span><br><span class="line">        min = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stack.push(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(stack.pop() == min) min = stack.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>去掉AAA、AABB，从左往右匹配</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    <span class="keyword">int</span> n = Integer.parseInt(sc.nextLine());</span><br><span class="line">    <span class="keyword">while</span>(n--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder(sc.nextLine());</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;=sb.length();)&#123;</span><br><span class="line">            <span class="comment">// AAA</span></span><br><span class="line">            <span class="keyword">if</span>(i&gt;=<span class="number">3</span></span><br><span class="line">               &amp;&amp;sb.charAt(i-<span class="number">3</span>)==sb.charAt(i-<span class="number">2</span>)</span><br><span class="line">               &amp;&amp;sb.charAt(i-<span class="number">2</span>)==sb.charAt(i-<span class="number">1</span>)) &#123;</span><br><span class="line">                sb.deleteCharAt(i-<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//AABB</span></span><br><span class="line">            <span class="keyword">if</span>(i&gt;=<span class="number">4</span></span><br><span class="line">               &amp;&amp;sb.charAt(i-<span class="number">4</span>)==sb.charAt(i-<span class="number">3</span>)</span><br><span class="line">               &amp;&amp;sb.charAt(i-<span class="number">2</span>)==sb.charAt(i-<span class="number">1</span>)) &#123;</span><br><span class="line">                sb.deleteCharAt(i-<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="树"><a href="#树" class="headerlink" title="树"></a>树</h2><p><strong>树的算法，除层次遍历外，一律优先考虑递归算法。</strong></p>
<p>在分析递归时，画出递归树。</p>
<h3 id="层次遍历"><a href="#层次遍历" class="headerlink" title="层次遍历"></a>层次遍历</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">floorOrder(TreeNode root)&#123;</span><br><span class="line">    Queue queue = ...;</span><br><span class="line">    queue.offer(root);</span><br><span class="line">    <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">        TreeNode p=queue.poll();</span><br><span class="line">        print(p.value);</span><br><span class="line">        <span class="keyword">if</span>(p.left!=<span class="keyword">null</span>) queue.offer(p.left);</span><br><span class="line">        <span class="keyword">if</span>(p.right!=<span class="keyword">null</span>) queue.offer(p.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="非递归遍历"><a href="#非递归遍历" class="headerlink" title="非递归遍历"></a>非递归遍历</h3><p>递归转非递归，考虑栈。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">preOrder(TreeNode root)&#123;</span><br><span class="line">    TreeNode p=root;</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="keyword">null</span> || !stack.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">while</span>(p!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            print(p.val);</span><br><span class="line">            stack.push(p);</span><br><span class="line">            p=p.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//当p=null时，则根和左子树都遍历完了</span></span><br><span class="line">        p=stack.pop();</span><br><span class="line">        p=p.right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">inOrder(TreeNode root)&#123;</span><br><span class="line">    TreeNode p=root;</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="keyword">null</span> || !stack.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">while</span>(p!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            stack.push(p);</span><br><span class="line">            p=p.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 当p=null，则已到达最左叶子节点，访问它并问其右子树；</span></span><br><span class="line">        <span class="comment">// 如果右子树不为空，则继续递归访问；</span></span><br><span class="line">        <span class="comment">// 如果右子树为空，则当前节点已访问完，那么访问其父节点，即出栈。</span></span><br><span class="line">        p=stack.pop();</span><br><span class="line">        print(p.val);</span><br><span class="line">        p=p.right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>后序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">postOrder(TreeNode root)&#123;</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="keyword">null</span> || !stack.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">while</span>(p!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            stack.push(p);</span><br><span class="line">            p=p.left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 考虑右子树是否为空和前序及后序遍历的思想一致，</span></span><br><span class="line">        <span class="comment">// 关键在于如何访问父节点</span></span><br><span class="line">        p = stack.peek();</span><br><span class="line">        <span class="keyword">if</span>(p.right==<span class="keyword">null</span> || p.right==last)&#123;</span><br><span class="line">            print(p.val);</span><br><span class="line">            stack.pop();</span><br><span class="line"></span><br><span class="line">            last=p;</span><br><span class="line">            p=<span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            p=p.right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Z子形二叉树"><a href="#Z子形二叉树" class="headerlink" title="Z子形二叉树"></a>Z子形二叉树</h3><p>另外，二叉树的右视图与此题思想一致。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; zigzagLevelOrder(TreeNode root) &#123;</span><br><span class="line">    queue.offer(root);</span><br><span class="line">    <span class="keyword">int</span> floor=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">int</span> size=queue.size();</span><br><span class="line">        <span class="comment">// 关键思想：每次循环清空队列</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span><br><span class="line">            TreeNode node;</span><br><span class="line">            <span class="keyword">if</span>((floor&amp;<span class="number">1</span>)==<span class="number">1</span>)&#123;</span><br><span class="line">                node=queue.poll();</span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="keyword">null</span>) queue.offer(node.left); </span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="keyword">null</span>) queue.offer(node.right); </span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                node=queue.pollLast();</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="keyword">null</span>) queue.offerFirst(node.right); </span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="keyword">null</span>) queue.offerFirst(node.left); </span><br><span class="line">            &#125;</span><br><span class="line">            tmp.add(node.val);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        res.add(tmp);</span><br><span class="line">        floor=<span class="number">1</span>-floor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="树的子结构"><a href="#树的子结构" class="headerlink" title="树的子结构"></a>树的子结构</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">HasSubtree</span><span class="params">(TreeNode root1,TreeNode root2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> res=<span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(root1!=<span class="keyword">null</span> &amp;&amp; root2!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(root1.val==root2.val) res=have(root1,root2);</span><br><span class="line">        <span class="keyword">if</span>(!res) res=HasSubtree(root1.left, root2);</span><br><span class="line">        <span class="keyword">if</span>(!res) res=HasSubtree(root1.right, root2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">have</span><span class="params">(TreeNode node1, TreeNode node2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(node2==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(node1==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(node1.val!=node2.val) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">return</span> have(node1.left, node2.left)&amp;&amp;</span><br><span class="line">        have(node1.right, node2.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="重构二叉树"><a href="#重构二叉树" class="headerlink" title="重构二叉树"></a>重构二叉树</h3><p>已知前序和中序，重构二叉树。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TreeNode <span class="title">construct</span><span class="params">(<span class="keyword">int</span>[] pre,<span class="keyword">int</span> s1,<span class="keyword">int</span> e1, <span class="keyword">int</span>[] in,<span class="keyword">int</span> s2,<span class="keyword">int</span> e2)</span></span>&#123;</span><br><span class="line">    TreeNode root=<span class="keyword">new</span> TreeNode(pre[s1]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=s2;i&lt;=e2;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(in[i]==pre[s1])&#123; </span><br><span class="line">            <span class="keyword">if</span>(i!=s2) </span><br><span class="line">                <span class="comment">// 递归构造左子树</span></span><br><span class="line">                root.left=construct(pre,s1+<span class="number">1</span>, s1+i-s2, in,s2,i-<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(i!=e2)</span><br><span class="line">                <span class="comment">// 递归构造右子树</span></span><br><span class="line">                root.right=construct(pre,s1+i-s2+<span class="number">1</span>,e1, in,i+<span class="number">1</span>, e2);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>已知二叉树的前序和中序，直接求出后序。思想同重构二叉树。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">post</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s1.length() == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> root = s2.indexOf(s1.charAt(<span class="number">0</span>));</span><br><span class="line">    post(s1.substring(<span class="number">1</span>, root + <span class="number">1</span>), s2.substring(<span class="number">0</span>, root));</span><br><span class="line">    post(s1.substring(root + <span class="number">1</span>), s2.substring(root + <span class="number">1</span>));</span><br><span class="line">    System.out.print(s1.charAt(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="树的轮廓"><a href="#树的轮廓" class="headerlink" title="树的轮廓"></a>树的轮廓</h3><p>lintcode878</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">boundaryOfBinaryTree</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    boundary.add(root.val);</span><br><span class="line">    collectLeftBoundary(root.left, boundary);</span><br><span class="line">    collectLeaves(root, boundary);</span><br><span class="line">    collectRightBoundary(root.right, boundary);</span><br><span class="line">    <span class="keyword">return</span> boundary;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">collectLeftBoundary</span><span class="params">(TreeNode node, List&lt;Integer&gt; boundary)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="keyword">null</span> || isLeaf(node)) <span class="keyword">return</span>;</span><br><span class="line">    boundary.add(node.val);</span><br><span class="line">    collectLeftBoundary(node.left != <span class="keyword">null</span> ? node.left : node.right, boundary);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">collectRightBoundary</span><span class="params">(TreeNode node, List&lt;Integer&gt; boundary)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="keyword">null</span> || isLeaf(node)) <span class="keyword">return</span>;</span><br><span class="line">    collectRightBoundary(node.right != <span class="keyword">null</span> ? node.right : node.left, boundary);</span><br><span class="line">    boundary.add(node.val);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">collectLeaves</span><span class="params">(TreeNode node, List&lt;Integer&gt; boundary)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (isLeaf(node)) &#123;</span><br><span class="line">        boundary.add(node.val);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        collectLeaves(node.left, boundary);</span><br><span class="line">        collectLeaves(node.right, boundary);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二叉树的宽度"><a href="#二叉树的宽度" class="headerlink" title="二叉树的宽度"></a>二叉树的宽度</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dfs(root, <span class="number">0</span>, <span class="number">1</span>, <span class="keyword">new</span> LinkedList&lt;&gt;());</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(TreeNode node, <span class="keyword">int</span> d, <span class="keyword">int</span> index, List&lt;Integer&gt; lefts)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(node==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// the index of leftmost node</span></span><br><span class="line">    <span class="keyword">if</span>(d==lefts.size()) lefts.add(index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Math.max(index+<span class="number">1</span>-lefts.get(d), </span><br><span class="line">                    Math.max(dfs(node.left, d+<span class="number">1</span>, index*<span class="number">2</span>, lefts),</span><br><span class="line">                             dfs(node.right, d+<span class="number">1</span>, index*<span class="number">2</span>+<span class="number">1</span>, lefts)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二叉搜索树"><a href="#二叉搜索树" class="headerlink" title="二叉搜索树"></a>二叉搜索树</h3><p>性质：中序遍历是排序的。 那么逆中序遍历呢？</p>
<h3 id="二叉树的最近公共父节点"><a href="#二叉树的最近公共父节点" class="headerlink" title="二叉树的最近公共父节点"></a>二叉树的最近公共父节点</h3><p>思路：从根节点<strong>递归</strong>搜索，左子树中有子节点，右子树中也有子节点，那么根节点即为最近的父节点。</p>
<h2 id="图"><a href="#图" class="headerlink" title="图"></a>图</h2><p>dfs和bfs</p>
<p>LintCode 863</p>
<p>先通过dfs标记父节点（相当于把树转换为无向连通图），然后通过bfs找到距离目标为K的节点。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">distanceK</span><span class="params">(TreeNode root, TreeNode target, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">    dfs(root, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    queue.add(<span class="keyword">null</span>);</span><br><span class="line">    queue.add(target);</span><br><span class="line"></span><br><span class="line">    Set&lt;TreeNode&gt; visited = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    visited.add(target);</span><br><span class="line">    visited.add(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> dis = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">        TreeNode node = queue.poll();</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(dis == K)&#123;</span><br><span class="line">                List&lt;Integer&gt; ans = <span class="keyword">new</span> ArrayList&lt;&gt;(queue.size());</span><br><span class="line">                <span class="keyword">for</span>(TreeNode n: queue) ans.add(n.val);</span><br><span class="line">                <span class="keyword">return</span> ans;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            queue.offer(<span class="keyword">null</span>);</span><br><span class="line">            dis++;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!visited.contains(node.left)) &#123;</span><br><span class="line">                visited.add(node.left);</span><br><span class="line">                queue.offer(node.left);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(!visited.contains(node.right)) &#123;</span><br><span class="line">                visited.add(node.right);</span><br><span class="line">                queue.offer(node.right);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(!visited.contains(parents.get(node))) &#123;</span><br><span class="line">                visited.add(parents.get(node));</span><br><span class="line">                queue.offer(parents.get(node));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(TreeNode node, TreeNode parent)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(node==<span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    parents.put(node, parent);</span><br><span class="line">    dfs(node.left, node);</span><br><span class="line">    dfs(node.right, node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="递归回溯"><a href="#递归回溯" class="headerlink" title="递归回溯"></a>递归回溯</h2><p>找到二叉树中所有路径和等于目标值的路径。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(TreeNode root,<span class="keyword">int</span> target,ArrayList&lt;Integer&gt; tmp,</span></span></span><br><span class="line"><span class="function"><span class="params">         ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    tmp.add(root.val);</span><br><span class="line">    target-=root.val;</span><br><span class="line">    <span class="keyword">if</span>(root.left==<span class="keyword">null</span>&amp;&amp;root.right==<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(target==<span class="number">0</span>) res.add(<span class="keyword">new</span> ArrayList&lt;&gt;(tmp));</span><br><span class="line">        tmp.remove(tmp.size()-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    dfs(root.left,target,tmp, res);</span><br><span class="line">    dfs(root.right,target, tmp, res);</span><br><span class="line">    tmp.remove(tmp.size()-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>正则表达式匹配</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isMatch</span><span class="params">(String s, String p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p.isEmpty()) <span class="keyword">return</span> s.isEmpty();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> first = (!s.isEmpty() &amp;&amp; </span><br><span class="line">                     (s.charAt(<span class="number">0</span>)==p.charAt(<span class="number">0</span>)|| p.charAt(<span class="number">0</span>)==<span class="string">'.'</span>));</span><br><span class="line">    <span class="keyword">if</span>(p.length()&gt;=<span class="number">2</span> &amp;&amp; p.charAt(<span class="number">1</span>)==<span class="string">'*'</span>)</span><br><span class="line">        <span class="keyword">return</span> isMatch(s, p.substring(<span class="number">2</span>)) ||</span><br><span class="line">        (first&amp;&amp; isMatch(s.substring(<span class="number">1</span>), p));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> first &amp;&amp; isMatch(s.substring(<span class="number">1</span>), p.substring(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Leetcode 93</p>
<p>返回所有合理的IP地址。</p>
<h2 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h2><p>最长无重复字符的字串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一直滑动到set中相同字符前</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lls</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">    Set&lt;Character&gt; set=<span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(j&lt;s.length())&#123;</span><br><span class="line">        <span class="keyword">if</span>(!set.contains(s.charAt(j)))&#123;</span><br><span class="line">            set.add(s.charAt(j++));</span><br><span class="line">            res=max(res, j-i);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            set.remove(s.charAt(i++));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//优化，使用Map索引，直接定位</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lls</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">    Map&lt;Character,Integer&gt; map=<span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(j&lt;s.length())&#123;</span><br><span class="line">        <span class="keyword">if</span>(map.contains(s.charAt(j)))&#123;</span><br><span class="line">            <span class="comment">//防止回头</span></span><br><span class="line">            i=max(map.get(s.charAt(j)),i);</span><br><span class="line">        &#125;</span><br><span class="line">        res=max(res,j-i);</span><br><span class="line">        map.put(s.charAt(j),j+<span class="number">1</span>);</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-Pass"><a href="#2-Pass" class="headerlink" title="2-Pass"></a>2-Pass</h2><p>Q1  给定一个字符串S，返回字符串中所有字符距离指定字符C 的最短距离。</p>
<p>A1 从左至右扫描一次，记下 dis[i]=disLeft；再从右至左扫描一次，dis[i]=min(dis[i], disRight)。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] shortestToChar(String s,<span class="keyword">char</span> c)&#123;</span><br><span class="line">    <span class="keyword">int</span> n=s.length();</span><br><span class="line">    <span class="keyword">int</span>[] ans=<span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">    <span class="comment">// 在c第一次出现，将c前面的字符设置为距离c“无穷远”</span></span><br><span class="line">    <span class="keyword">int</span> pos=-n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.charAt(i)==c) pos=i;</span><br><span class="line">        ans[i]=i-pos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.charAt(i)==c) pos=i;</span><br><span class="line">        ans[i]=min(ans[i], abs(i-pos));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Q2 有一个数组，数组中每个元素为一个分数。给每个元素分配一个值，要求：</p>
<p>1、每个元素分配的值至少为1；</p>
<p>2、若元素的分数大于相邻元素，分配的值也要大于相邻元素。求最小分配的值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minValue</span><span class="params">(<span class="keyword">int</span>[] ratings)</span></span>&#123;</span><br><span class="line">    Arrays.fill(ratings, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> n=ratings.length;</span><br><span class="line">    <span class="keyword">int</span> cnt=<span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(ratings[i]&gt; ratings[i-<span class="number">1</span>])</span><br><span class="line">            cnt[i]=cnt[i-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> res=cnt[n-<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n-<span class="number">1</span>; i&gt;<span class="number">0</span>; i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(ratings[i-<span class="number">1</span>]&gt; ratings[i])</span><br><span class="line">            cnt[i-<span class="number">1</span>]=max(cnt[i-<span class="number">1</span>] ,cnt[i]+<span class="number">1</span>);</span><br><span class="line">        res+=cnt[i-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><h3 id="Max-1D-Range-Sum"><a href="#Max-1D-Range-Sum" class="headerlink" title="Max 1D Range Sum"></a>Max 1D Range Sum</h3><p>description：Give an integer array A containing n non-zero integers, find the max Range Sum Query(RSQ) between two indices i and j in [0…n-1].</p>
<p>dp[i]代表以A[i]结尾的最大范围和。 </p>
<p>对于dp[i]：dp[i]= max(dp[i-1], 0) + A[i].</p>
<p>最大范围和即dp[i]中的最大值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="keyword">int</span> A[])&#123;</span><br><span class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>,ans=<span class="number">0</span>;</span><br><span class="line">   	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;A.length,i++)&#123;</span><br><span class="line">        sum+=A[i];</span><br><span class="line">        ans=max(ans,sum);</span><br><span class="line">        <span class="keyword">if</span>(sum&lt;<span class="number">0</span>) sum=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="LIS"><a href="#LIS" class="headerlink" title="LIS"></a>LIS</h3><p>最长递增子序列。</p>
<p>例子 ｛-7, 10 , 9 ,  2,  3 , 8,  8 , 1｝</p>
<p>1）LIS[i]= max(LIS[j])+1 (j∈[0,i-1] ,A[j]&lt;A[i] )</p>
<p>2）L={-7} ,  L={-7, 10}, L={-7, 9}…</p>
<p>Q: 假如袋子里共有5个积木分别为 (2, 2), (2, 4), (3, 3), (2, 5), (4, 5), 则不难判断这些积木最多可以搭成4层, </p>
<p>因为(2, 2) &lt; (2, 4) &lt; (2, 5) &lt; (4, 5)。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    Arrays.sort(a, (p,q)-&gt;&#123;</span><br><span class="line">        <span class="keyword">return</span> p[<span class="number">0</span>]!=q[<span class="number">0</span>]?p[<span class="number">0</span>]-q[<span class="number">0</span>]:p[<span class="number">1</span>]-q[<span class="number">1</span>];</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">int</span>[] dp=<span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    dp[k++]=a[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i][<span class="number">1</span>]&gt;=dp[k-<span class="number">1</span>])</span><br><span class="line">            dp[k++]=a[i][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> pos=upperBound(dp,<span class="number">0</span>,k,a[i][<span class="number">1</span>]);</span><br><span class="line">            dp[pos]=a[i][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="0-1-Knapsack"><a href="#0-1-Knapsack" class="headerlink" title="0-1 Knapsack"></a>0-1 Knapsack</h3><p>top-down</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">value</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> w)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i==N || w==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[i][w]!= -<span class="number">1</span>) <span class="keyword">return</span> dp[i][w];</span><br><span class="line">    <span class="keyword">if</span>(W[i]&gt;w) <span class="keyword">return</span> dp[i][w]= value(i+<span class="number">1</span>, w）;</span><br><span class="line">    <span class="keyword">return</span> dp[i][w]=max(value(i+<span class="number">1</span>, w), V[i]+ value(i+<span class="number">1</span>, w-W[i]));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>bottom-up</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">value</span><span class="params">(<span class="keyword">int</span> N, <span class="keyword">int</span> W)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] dp=<span class="keyword">new</span> <span class="keyword">int</span>[N+<span class="number">1</span>][W+<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)</span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=W;j++)</span><br><span class="line">            <span class="keyword">if</span>(W[i]&gt;j) dp[i][j]=dp[i-<span class="number">1</span>][j];</span><br><span class="line">    		<span class="keyword">else</span> dp[i][j]=max(dp[i-<span class="number">1</span>][j], V[i]+dp[i-<span class="number">1</span>][j-W[i]]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以优化，一维数组解决。</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">value</span><span class="params">(<span class="keyword">int</span> N; <span class="keyword">int</span> W)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] dp=<span class="keyword">new</span> <span class="keyword">int</span>[W+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=W;j&gt;=V[i];j--)</span><br><span class="line">            dp[j]=max(dp[j],dp[j- W[i]]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Subset-Sum"><a href="#Subset-Sum" class="headerlink" title="Subset Sum"></a>Subset Sum</h3><p>1）给定一个非负数整数集S，判断是否有S的非空子集之和等于给定的Sum。</p>
<p>top-down</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">solve(i,sum) 表示从i开始是否有子集和等于Sum。</span><br><span class="line"></span><br><span class="line">base <span class="keyword">case</span>:</span><br><span class="line">solve(n,sum)=<span class="keyword">false</span> (sum&gt;<span class="number">0</span> &amp;&amp; i==n);</span><br><span class="line">solve(i,<span class="number">0</span>)=<span class="keyword">true</span> (sum==<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//若S[i]&gt;sum，则跳过S[i]</span></span><br><span class="line"><span class="keyword">if</span>(S[i]&gt;sum) <span class="keyword">return</span> solve(i+<span class="number">1</span>,sum);</span><br><span class="line">solve(i,sum)=solve(i+<span class="number">1</span>,sum) || solve(i+<span class="number">1</span>,sum-S[i]);</span><br></pre></td></tr></table></figure>
<p>bottom-up</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dp[i][j] 表示到前i个数中，是否有sum=j；</span></span><br><span class="line"><span class="keyword">boolean</span>[][] dp=<span class="keyword">new</span> <span class="keyword">boolean</span>[n+<span class="number">1</span>][sum+<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++) dp[i][<span class="number">0</span>]=<span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=sum;j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(j&lt;S[i]) dp[i][j]=dp[i-<span class="number">1</span>][j];</span><br><span class="line">        <span class="keyword">else</span> dp[i][j]=dp[i-<span class="number">1</span>][j] || dp[i-<span class="number">1</span>][j-S[i]];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以优化</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=sum;j&gt;=S[i];j--)</span><br><span class="line">        dp[j]=dp[j] || dp[j-S[i]];</span><br></pre></td></tr></table></figure>
<p>变种1 给定一个非负数的数组，是否可以将其分成两个和相等的数组？</p>
<p>Q： 搜索该数组中是否有部分和等于数组和的一半。</p>
<p>​    1 用Subset Sum。</p>
<p>​    2 回溯（见下面变种2）。</p>
<p>变种2 给定一个非负数的数组， 是否可以将其分为 k 个和相等的数组？</p>
<p>Q：回溯搜索该数组，目标为 sum/k。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">backtract</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span>[] a, <span class="keyword">boolean</span>[] visited, <span class="keyword">int</span> k, <span class="keyword">int</span> sum, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">true</span>;<span class="comment">//只剩下最后一组</span></span><br><span class="line">    <span class="keyword">if</span>(sum&gt;target) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(sum==target)</span><br><span class="line">        <span class="keyword">return</span> backtract(<span class="number">0</span>,a,visited,k-<span class="number">1</span>,<span class="number">0</span>,target);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=start;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!visited[i])&#123;</span><br><span class="line">            visited[i]=<span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(backtract(i+<span class="number">1</span>,a,visited,k, sum+a[i], target))</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            visited[i]=<span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Coin-Change"><a href="#Coin-Change" class="headerlink" title="Coin Change"></a>Coin Change</h3><p>例子 N=2,  币种 {1,5},  V=10</p>
<p>1 求最少使用多少个硬币。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">change(0)=0;</span><br><span class="line">change(&lt;0) = INF;</span><br><span class="line">change(i) = min(change(i- coinValue[j])) + 1</span><br></pre></td></tr></table></figure>
<p>2 求有多少种换法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dp[i][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(j&lt;coinValue[i]) dp[i][j]=dp[i-<span class="number">1</span>][j];</span><br><span class="line"><span class="keyword">else</span> dp[i][j] = dp[i-<span class="number">1</span>][j]+dp[i][j- coinValue[i]];</span><br></pre></td></tr></table></figure>
<h3 id="K个非负数加到N"><a href="#K个非负数加到N" class="headerlink" title="K个非负数加到N"></a>K个非负数加到N</h3><p>例如，K=2， N=20，有21种：0+20, … , 20+0</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ways(n,k);</span><br><span class="line"></span><br><span class="line">ways(i,<span class="number">1</span>)=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=k;j++;)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">0</span>;x&lt;=i;x++)</span><br><span class="line">            dp[i][j]+=dp[i-x][j-<span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<h3 id="Cutting-Sticks"><a href="#Cutting-Sticks" class="headerlink" title="Cutting Sticks"></a>Cutting Sticks</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cut(i,i+<span class="number">1</span>)=<span class="number">0</span>；</span><br><span class="line"></span><br><span class="line">cut(i,j)=min(cut(i,k) + cut(k,j) + A[j]-A[i]) k∈[i+<span class="number">1</span>,j)</span><br></pre></td></tr></table></figure>
<p>dp一般思路：State Expressions –&gt; Base Case –&gt; General Case（Top-down , Bottom-up）</p>
<h3 id="String-Processing-With-DP"><a href="#String-Processing-With-DP" class="headerlink" title="String Processing With DP"></a>String Processing With DP</h3><h4 id="LCS-最长公共子序列"><a href="#LCS-最长公共子序列" class="headerlink" title="LCS(最长公共子序列)"></a>LCS(最长公共子序列)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a[i]== b[j]) dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> dp[i][j]=max(dp[i-<span class="number">1</span>][j], dp[i][j-<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>
<p>另外：最长公共子串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a[i]==b[j]) dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> dp[i][j]=<span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<h4 id="Longest-Palindrome-回文"><a href="#Longest-Palindrome-回文" class="headerlink" title="Longest Palindrome(回文)"></a>Longest Palindrome(回文)</h4><p>搜索回文串可用“中心向两边扩散算法”。</p>
<p>一个变种：可删除的情况下，某字符串中最长回文串长度。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dp[l][r] 表示 A[l...r] 最长回文串的长度。</span><br><span class="line"></span><br><span class="line">Base Case: </span><br><span class="line">	<span class="keyword">if</span>(l== r) dp[l][r]= <span class="number">1</span></span><br><span class="line">Recurrent:</span><br><span class="line">	<span class="keyword">if</span>(l&lt;r)</span><br><span class="line">    	<span class="keyword">if</span>(A[l]==A[r]) dp[l][r]=dp[l+<span class="number">1</span>][r-<span class="number">1</span>]+<span class="number">2</span>;</span><br><span class="line">    	<span class="keyword">else</span> dp[l][r]= max(dp[l+<span class="number">1</span>,r] , dp[l][r-<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>
<h3 id="最大连续乘积"><a href="#最大连续乘积" class="headerlink" title="最大连续乘积"></a>最大连续乘积</h3><p>解法一：暴力破解。遍历所有子数组，求最大值。</p>
<p>解法二：存储到某个位置为止的所有子数组的最大值和最小值。</p>
<h3 id="House-Robber"><a href="#House-Robber" class="headerlink" title="House Robber"></a>House Robber</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rob</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> rob=<span class="number">0</span>, nrob=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">        rob=nrob+nums[i];</span><br><span class="line">        nrob=res;</span><br><span class="line">        res=Math.max(res,rob);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="TSP"><a href="#TSP" class="headerlink" title="TSP"></a>TSP</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span>[][] dis,memo;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    n = sc.nextInt();</span><br><span class="line">    dis=<span class="keyword">new</span> <span class="keyword">int</span>[n][n];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">            dis[i][j]=sc.nextInt();</span><br><span class="line">    memo=<span class="keyword">new</span> <span class="keyword">int</span>[n][<span class="number">1</span>&lt;&lt;n];</span><br><span class="line">    System.out.println(tsp(<span class="number">0</span>,<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">tsp</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> mask)</span></span>&#123;</span><br><span class="line">    <span class="comment">// 例如，mask=1111</span></span><br><span class="line">    <span class="keyword">if</span>(mask==(<span class="number">1</span>&lt;&lt;n)-<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> dis[pos][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span>(memo[pos][mask]!=<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> memo[pos][mask];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans=Integer.MAX_VALUE;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i!=pos &amp;&amp; (mask&amp;(<span class="number">1</span>&lt;&lt;i))==<span class="number">0</span>)</span><br><span class="line">            ans=Math.min(ans, dis[pos][i]+tsp(i, mask|(<span class="number">1</span>&lt;&lt;i)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> memo[pos][mask]=ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="最大m段子段和"><a href="#最大m段子段和" class="headerlink" title="最大m段子段和"></a>最大m段子段和</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">now[j]以a[j]结尾的i段子段最大值</span></span><br><span class="line"><span class="comment">pre[j]前j个数的i-1段子段最大值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">    res=Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;j++)&#123;</span><br><span class="line">        now[j]=Math.max(now[j-<span class="number">1</span>], pre[j-<span class="number">1</span>])+a[j];</span><br><span class="line">        pre[j-<span class="number">1</span>]=res;</span><br><span class="line">        res=Math.max(res,now[j]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://blog.csdn.net/double215726/article/details/9283181" target="_blank" rel="noopener">经典动态规划——HDU1024 m段子段和的最大值</a></p>
<h3 id="股票问题"><a href="#股票问题" class="headerlink" title="股票问题"></a>股票问题</h3><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/discuss/108870/Most-consistent-ways-of-dealing-with-the-series-of-stock-problems" target="_blank" rel="noopener">Most consistent ways of dealing with the series of stock problems</a></p>
<h3 id="单词分割"><a href="#单词分割" class="headerlink" title="单词分割"></a>单词分割</h3><p>LeetCode 139</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">wordBreak</span><span class="params">(String s, List&lt;String&gt; wordDict)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n =  s.length();</span><br><span class="line">    <span class="keyword">boolean</span>[] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[n+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;i ; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(dp[j] &amp;&amp; wordDict.contains(s.substring(j, i)))&#123;</span><br><span class="line">                dp[i] = <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="贪心"><a href="#贪心" class="headerlink" title="贪心"></a>贪心</h2><p>贪心策略，多用反证法证明。</p>
<p>漂流船问题：每个船载两人，最少的船载完。</p>
<p>贪心策略：尽可能载最大和最小者。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Arrays.sort(a);</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>,j=a.length-<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(i&lt;j)&#123;</span><br><span class="line">    <span class="keyword">if</span>(a[i]+a[j]&lt;= limit)&#123;</span><br><span class="line">        i++;</span><br><span class="line">        j--;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        j--;</span><br><span class="line">    &#125;</span><br><span class="line">    res++;</span><br><span class="line">&#125;</span><br><span class="line">res+=i==j?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line">System.out.println(res);</span><br></pre></td></tr></table></figure>
<h2 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h2><p>LeetCode 496、503下一个大的数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 思路：维护一个递减序列</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] nextGreaterElement(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2) &#123;</span><br><span class="line">    LinkedList&lt;Integer&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;nums2.length; i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; stack.peek()&lt; nums2[i])&#123;</span><br><span class="line">            map.put(stack.pop(), nums2[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(nums2[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数学"><a href="#数学" class="headerlink" title="数学"></a>数学</h2><h3 id="约瑟夫环"><a href="#约瑟夫环" class="headerlink" title="约瑟夫环"></a>约瑟夫环</h3><p>1） 循环链表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">LastRemaining_Solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;<span class="number">1</span>||m&lt;<span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    LinkedList&lt;Integer&gt; list=<span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) list.add(i);</span><br><span class="line">    <span class="keyword">int</span> nxt=(m-<span class="number">1</span>)%n;</span><br><span class="line">    <span class="keyword">while</span>(list.size()&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        list.remove(nxt);</span><br><span class="line">        nxt=(nxt+m-<span class="number">1</span>)%list.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> list.get(<span class="number">0</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2）数学规律<br>$$<br>f(n,m)=\begin{cases}<br>0, &amp; \text{ if } n=1 \cr<br>[f(n-1,m)+m]\%n, &amp; \text{ if } n&gt;1<br>\end{cases}<br>$$</p>
<h3 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h3><p>字典中只含n个“a”和m个“z”，按字典序排列，第k个是什么。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//有点像分治法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n=sc.nextInt(),m=sc.nextInt(),k=sc.nextInt();</span><br><span class="line">    StringBuilder sb=<span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">while</span>(n&gt;<span class="number">0</span>&amp;&amp;m&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">long</span> cnt=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n-<span class="number">1</span>;i++)&#123;</span><br><span class="line">            cnt*=n-<span class="number">1</span>+m-i;</span><br><span class="line">            cnt/=i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(cnt&gt;k) <span class="keyword">break</span>; </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(k&lt;=cnt)&#123;</span><br><span class="line">            sb.append(<span class="string">"a"</span>);</span><br><span class="line">            n--;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            sb.append(<span class="string">"z"</span>);</span><br><span class="line">            m--;</span><br><span class="line">            k-=cnt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(k!=<span class="number">1</span>)&#123;</span><br><span class="line">        System.out.println(-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(n--&gt;<span class="number">0</span>) sb.append(<span class="string">"a"</span>);</span><br><span class="line">    <span class="keyword">while</span>(m--&gt;<span class="number">0</span>) sb.append(<span class="string">"z"</span>);</span><br><span class="line">    System.out.println(sb.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="全排列"><a href="#全排列" class="headerlink" title="全排列"></a>全排列</h3><p>方法一：基于交换的全排列。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">permutation(a, <span class="number">0</span>, res);</span><br><span class="line"><span class="comment">//排序</span></span><br><span class="line">Collections.sort(res);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">permutationWithSwap</span><span class="params">(<span class="keyword">char</span>[] a,<span class="keyword">int</span> s, ArrayList&lt;String&gt; res)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s==a.length-<span class="number">1</span>)&#123; res.add(String.valueOf(a)); <span class="keyword">return</span>; &#125;</span><br><span class="line">    Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=s; i&lt;a.length; i++)&#123;</span><br><span class="line">        <span class="comment">// 去重</span></span><br><span class="line">        <span class="keyword">if</span>(i==s || !set.contains(a[i]))&#123;</span><br><span class="line">            set.add(a[i]);</span><br><span class="line">            swap(a,i,start);</span><br><span class="line">            permutation(a,start+<span class="number">1</span>);</span><br><span class="line">            swap(a,i,satrt);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法二：基于字典序的全排列。</p>
<p>找下一个的思想如下：</p>
<ol>
<li><p>从后向前扫描，找到第一个非递增的位置p，保证了p之后序列的逆序递增；</p>
</li>
<li><p>从p+1开始向后扫描，找到最后一个大于p的位置q，结合第1步，可知这个q是大于p的最小位置；</p>
</li>
<li>交换p、q，然后对p+1之后的非递减序列逆序。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ArrayList&lt;String&gt; <span class="title">permutationWithDict</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">    ArrayList&lt;String&gt; res=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span>(str==<span class="keyword">null</span>||str.length==<span class="number">0</span>) <span class="keyword">return</span> res;</span><br><span class="line">    <span class="keyword">char</span>[] a=str.toCharArray();</span><br><span class="line">    Arrays.sort(a);</span><br><span class="line">    res.add(String.valueOf(a));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(;;)&#123;</span><br><span class="line">        <span class="keyword">int</span> p=a.length-<span class="number">1</span>, q;</span><br><span class="line">        <span class="keyword">while</span>(p&gt;<span class="number">0</span> &amp;&amp; a[p-<span class="number">1</span>]&gt;=a[p]) p--;</span><br><span class="line">        <span class="comment">//跳出循环</span></span><br><span class="line">        <span class="keyword">if</span>(p==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        q= p--;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(q&lt;a.length &amp;&amp; a[q]&gt;a[p]) q++;</span><br><span class="line">        q--;</span><br><span class="line">        swap(a,p,q);</span><br><span class="line">        reverse(a,p+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数值的整数次方"><a href="#数值的整数次方" class="headerlink" title="数值的整数次方"></a>数值的整数次方</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">Power</span><span class="params">(<span class="keyword">double</span> base, <span class="keyword">int</span> exponent)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(exponent==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> n=Math.abs(exponent);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> res=<span class="number">1</span>, cur=base;</span><br><span class="line">    <span class="comment">// 如何处理一个数的二进制形式</span></span><br><span class="line">    <span class="keyword">while</span>(n!=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>((n&amp;<span class="number">1</span>)==<span class="number">1</span>)</span><br><span class="line">            res*=cur;</span><br><span class="line">        cur*=cur;</span><br><span class="line">        n&gt;&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> exponent&gt;<span class="number">0</span>? res:<span class="number">1</span>/res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="素数筛"><a href="#素数筛" class="headerlink" title="素数筛"></a>素数筛</h3><p><a href="https://www.cnblogs.com/grubbyskyer/p/3852421.html" target="_blank" rel="noopener">https://www.cnblogs.com/grubbyskyer/p/3852421.html</a></p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="二叉搜索树（递归）"><a href="#二叉搜索树（递归）" class="headerlink" title="二叉搜索树（递归）"></a>二叉搜索树（递归）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearchTree</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        E elem;</span><br><span class="line">        Node&lt;E&gt; left, right;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(E elem, Node&lt;E&gt; left, Node&lt;E&gt; right)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.elem = elem;</span><br><span class="line">            <span class="keyword">this</span>.left = left;</span><br><span class="line">            <span class="keyword">this</span>.right = right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Node&lt;T&gt; root;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node&lt;T&gt; <span class="title">insert</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> root = insert(x, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Node&lt;T&gt; <span class="title">insert</span><span class="params">(T x, Node&lt;T&gt; root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> Node&lt;&gt;(x, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> comp = x.compareTo(root.elem);</span><br><span class="line">        <span class="keyword">if</span> (comp &gt; <span class="number">0</span>) root.right = insert(x, root.right);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (comp &lt; <span class="number">0</span>) root.left = insert(x, root.left);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> contains(x, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(T x, Node&lt;T&gt; root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> comp = x.compareTo(root.elem);</span><br><span class="line">        <span class="keyword">if</span> (comp &gt; <span class="number">0</span>) <span class="keyword">return</span> contains(x, root.right);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (comp &lt; <span class="number">0</span>) <span class="keyword">return</span> contains(x, root.left);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node&lt;T&gt; <span class="title">remove</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> root = remove(x, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Node&lt;T&gt; <span class="title">remove</span><span class="params">(T x, Node&lt;T&gt; root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> comp = x.compareTo(root.elem);</span><br><span class="line">        <span class="keyword">if</span> (comp &gt; <span class="number">0</span>) root.right = remove(x, root.right);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (comp &lt; <span class="number">0</span>) root.left = remove(x, root.left);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// two child</span></span><br><span class="line">            <span class="keyword">if</span> (root.left != <span class="keyword">null</span> &amp;&amp; root.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                root.elem = findMin(root.right).elem;</span><br><span class="line">                root.right = remove(root.elem, root);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// one child or leaf</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                root = root.left != <span class="keyword">null</span> ? root.left : root.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Node&lt;T&gt; <span class="title">findMin</span><span class="params">(Node&lt;T&gt; root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (root.left != <span class="keyword">null</span>)</span><br><span class="line">            root = root.left;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数组实现堆进而实现优先队列"><a href="#数组实现堆进而实现优先队列" class="headerlink" title="数组实现堆进而实现优先队列"></a>数组实现堆进而实现优先队列</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaxPQ</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; </span>&#123;</span><br><span class="line">    T[] pq;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">less</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pq[i].compareTo(pq[j]) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">exch</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        T t = pq[i];</span><br><span class="line">        pq[i] = pq[j];</span><br><span class="line">        pq[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; less(k / <span class="number">2</span>, k)) &#123;</span><br><span class="line">            exch(k, k / <span class="number">2</span>);</span><br><span class="line">            k /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">2</span> * k &lt;= n) &#123;</span><br><span class="line">            <span class="keyword">int</span> j = <span class="number">2</span> * k;</span><br><span class="line">            <span class="keyword">if</span> (j &lt; n &amp;&amp; less(j, j + <span class="number">1</span>)) j++;</span><br><span class="line">            <span class="keyword">if</span> (!less(k, j)) <span class="keyword">break</span>;</span><br><span class="line">            exch(k, j);</span><br><span class="line">            k = j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">        pq[++n] = x;</span><br><span class="line">        swim(n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T <span class="title">delMax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        T max = pq[<span class="number">1</span>];</span><br><span class="line">        exch(<span class="number">1</span>, n);</span><br><span class="line">        pq[n--] = <span class="keyword">null</span>;</span><br><span class="line">        sink(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="LRU"><a href="#LRU" class="headerlink" title="LRU"></a>LRU</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 双向链表，便于删除和插入</span></span><br><span class="line">    Node head,tail;</span><br><span class="line">    HashMap&lt;Integer, Node&gt; map;</span><br><span class="line">    <span class="keyword">int</span> capacity,size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        head=<span class="keyword">new</span> Node(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        tail=<span class="keyword">new</span> Node(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        head.next=tail;</span><br><span class="line">        tail.pre=head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.capacity=capacity;</span><br><span class="line">        map=<span class="keyword">new</span> HashMap&lt;&gt;(capacity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!map.containsKey(key)) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        Node target=map.get(key);</span><br><span class="line">        remove(target);</span><br><span class="line">        add(target);</span><br><span class="line">        <span class="keyword">return</span> target.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(key))&#123;</span><br><span class="line">            Node node=map.get(key);</span><br><span class="line">            node.value=value;</span><br><span class="line">            remove(node);</span><br><span class="line">            add(node);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; </span><br><span class="line">            Node node=<span class="keyword">new</span> Node(key,value);</span><br><span class="line">            <span class="keyword">if</span>(size==capacity)&#123;</span><br><span class="line">                Node old=tail.pre;</span><br><span class="line">                remove(old);</span><br><span class="line">                map.remove(old.key);</span><br><span class="line">            &#125;<span class="keyword">else</span> size++;</span><br><span class="line"></span><br><span class="line">            add(node); </span><br><span class="line">            map.put(key,node);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        node.next.pre=node.pre;</span><br><span class="line">        node.pre.next=node.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        head.next.pre=node;</span><br><span class="line">        node.next=head.next;</span><br><span class="line">        head.next=node;</span><br><span class="line">        node.pre=head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="前缀树"><a href="#前缀树" class="headerlink" title="前缀树"></a>前缀树</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TrieTree</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">        Character keyword;</span><br><span class="line">        Map&lt;Character, TrieNode&gt; subNodes = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">boolean</span> isKeyWordEnd;</span><br><span class="line"></span><br><span class="line">        <span class="function">TrieNode <span class="title">getSubNode</span><span class="params">(Character c)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> subNodes.get(c);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">putSubNode</span><span class="params">(Character c, TrieNode node)</span> </span>&#123;</span><br><span class="line">            subNodes.put(c, node);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isKeyWordEnd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> isKeyWordEnd;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKeyWordEnd</span><span class="params">(<span class="keyword">boolean</span> keyWordEnd)</span> </span>&#123;</span><br><span class="line">            isKeyWordEnd = keyWordEnd;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    TrieNode root = <span class="keyword">new</span> TrieNode();</span><br><span class="line">    <span class="keyword">final</span> String REPLACE = <span class="string">"***"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        TrieNode tempNode = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; word.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = word.charAt(i);</span><br><span class="line">            TrieNode subNode = tempNode.getSubNode(c);</span><br><span class="line">            <span class="keyword">if</span> (subNode == <span class="keyword">null</span>) &#123;</span><br><span class="line">                subNode = <span class="keyword">new</span> TrieNode();</span><br><span class="line">                tempNode.putSubNode(c, subNode);</span><br><span class="line">            &#125;</span><br><span class="line">            tempNode = subNode;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (i == word.length() - <span class="number">1</span>) tempNode.setKeyWordEnd(<span class="keyword">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">filter</span><span class="params">(String text)</span> </span>&#123;</span><br><span class="line">        TrieNode subNode = root;</span><br><span class="line">        <span class="keyword">int</span> begin = <span class="number">0</span>, position = <span class="number">0</span>;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (position &lt; text.length()) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = text.charAt(position);</span><br><span class="line">            subNode = subNode.getSubNode(c);</span><br><span class="line">            <span class="keyword">if</span> (subNode == <span class="keyword">null</span>) &#123;</span><br><span class="line">                sb.append(text.charAt(begin));</span><br><span class="line">                position = ++begin;</span><br><span class="line">                subNode = root;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (subNode.isKeyWordEnd()) &#123;</span><br><span class="line">                sb.append(REPLACE);</span><br><span class="line">                begin = ++position;</span><br><span class="line">                subNode = root;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                position++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (begin &lt; text.length()) &#123;</span><br><span class="line">            sb.append(text.substring(begin));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="阻塞队列"><a href="#阻塞队列" class="headerlink" title="阻塞队列"></a>阻塞队列</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoundedBuffer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">final</span> Condition notFull = lock.newCondition();</span><br><span class="line">    <span class="keyword">final</span> Condition notEmpty = lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> putptr, takeptr, count;</span><br><span class="line">    Object[] items = <span class="keyword">new</span> Object[<span class="number">100</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(Object x)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (count == items.length)</span><br><span class="line">                notFull.await();</span><br><span class="line">            items[putptr] = x;</span><br><span class="line">            <span class="keyword">if</span> (++putptr == items.length) putptr = <span class="number">0</span>;</span><br><span class="line">            ++count;</span><br><span class="line">            notEmpty.signal();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Object <span class="title">take</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (count == <span class="number">0</span>)</span><br><span class="line">                notEmpty.await();</span><br><span class="line">            Object x = items[takeptr];</span><br><span class="line">            <span class="keyword">if</span> (++takeptr == items.length) takeptr = putptr;</span><br><span class="line">            --count;</span><br><span class="line">            notFull.signal();</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="赛马问题"><a href="#赛马问题" class="headerlink" title="赛马问题"></a>赛马问题</h3><p><a href="https://www.iteye.com/blog/hxraid-662643" target="_blank" rel="noopener">https://www.iteye.com/blog/hxraid-662643</a></p>

      </div>
      
      <footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/algorithm/">algorithm</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/2019/09/21/java/interview/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">知识点总结</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    <a class="next" href="/2019/08/02/java/netty1/">
        <span class="next-text nav-default">Netty新连接接入过程</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"></div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:xu.io@qq.com" class="iconfont icon-email" title="email"></a>
        <a href="https://github.com/Langzi418" class="iconfont icon-github" title="github"></a>
        </div><div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2018 - 2020<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Singular</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
